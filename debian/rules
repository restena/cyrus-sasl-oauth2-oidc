#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

# Enable all hardening flags
export DEB_BUILD_MAINT_OPTIONS = hardening=+all

# Use debhelper v13
%:
	dh $@ --with autoreconf

override_dh_auto_configure:
	dh_auto_configure -- \
		--prefix=/usr \
		--libdir=/usr/lib/$(DEB_HOST_MULTIARCH) \
		--enable-shared \
		--disable-static \
		--disable-tests

override_dh_auto_test:
	# Tests are disabled via configure, skip test phase
	@echo "Tests disabled during package build"

override_dh_auto_install:
	dh_auto_install
	# Remove .la files as they are not needed
	find debian/tmp -name "*.la" -delete || true

override_dh_missing:
	dh_missing --fail-missing
